<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
<style>
html, body {
  margin: 0;
  padding: 0;
  width: 100%;
  height: 100%;
  font-family: 'Montserrat', sans-serif;
  display: flex;
  justify-content: center;
  align-items: center;
  background-color: #f9f9f9;
}
#radarChart {
  width: 100%;
  height: 100%;
}
</style>
</head>
<body>
<div id="radarChart"></div>
<script>
// Data points
const dataPoints = [
  {Category: "Concentration Risk", Value: 9},
  {Category: "Payment History", Value: 8},
  {Category: "Sector Diversity", Value: 2},
  {Category: "Margin Quality", Value: 8},
  {Category: "Deposit Coverage", Value: 5}
];

// Assign fixed angles for upright pentagon
const angles = [
  90,    // Concentration Risk top
  18,    // Payment History top-right
  306,   // Sector Diversity bottom-right
  234,   // Margin Quality bottom-left
  162    // Deposit Coverage top-left
].map(a => a * Math.PI / 180);

// Normalize values to max radius = 1
const maxRadius = 1;
const values = dataPoints.map(d => d.Value / 10 * maxRadius);

// Radar polygon coordinates
const xs = values.map((v,i) => v * Math.cos(angles[i]));
const ys = values.map((v,i) => v * Math.sin(angles[i]));
xs.push(xs[0]); ys.push(ys[0]);

// Label positions slightly outside vertices
const labelXs = values.map((v,i) => 1.08 * Math.cos(angles[i]));
const labelYs = values.map((v,i) => 1.08 * Math.sin(angles[i]));
const labels = dataPoints.map(d => d.Category);

// Radar polygon trace
const radarTrace = {
  x: xs,
  y: ys,
  fill: 'toself',
  fillcolor: 'rgba(255,127,14,0.5)',
  line: { color: '#ff7f0e', width: 2 },
  type: 'scatter',
  hoverinfo: 'skip'
};

// Labels trace
const labelTrace = {
  x: labelXs,
  y: labelYs,
  text: labels,
  mode: 'text',
  textfont: { size: 14, color: '#333' },
  hoverinfo: 'skip',
  type: 'scatter'
};

// Vertical scale trace (Concentration Risk axis)
const scaleTrace = {
  x: [0, 0],
  y: [0, maxRadius],
  mode: 'lines+text',
  line: { color: '#999', width: 1, dash: 'dot' },
  text: ['0','2','4','6','8','10'],
  textposition: 'middle right',
  textfont: { size: 12, color: '#555' },
  type: 'scatter'
};

// Add small tick lines along the vertical axis
const tickTraces = [];
for(let i=1;i<=10;i+=2){
  tickTraces.push({
    x: [-0.02, 0.02],
    y: [i/10*maxRadius, i/10*maxRadius],
    mode: 'lines+text',
    line: { color:'#999', width:1 },
    text: [i],
    textposition: 'middle right',
    textfont: { size: 12, color: '#555' },
    type: 'scatter'
  });
}

const layout = {
  xaxis: { visible: false, range: [-1.3,1.3] },
  yaxis: { visible: false, range: [-1.3,1.3] },
  margin: { t: 30, b: 30, l: 60, r: 60 }, // leave space for labels
  autosize: true,
  plot_bgcolor: 'rgba(0,0,0,0)',
  paper_bgcolor: 'rgba(0,0,0,0)',
  showlegend: false
};

const config = { displayModeBar: false, responsive: true };
const chartDiv = document.getElementById('radarChart');

function resizeChart() {
  Plotly.Plots.resize(chartDiv);
}

// Initial render
Plotly.newPlot(chartDiv, [radarTrace, labelTrace, scaleTrace, ...tickTraces], layout, config);
window.addEventListener('resize', resizeChart);
setInterval(resizeChart, 100);
</script>
</body>
</html>
