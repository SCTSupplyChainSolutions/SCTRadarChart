<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
<style>
html, body {
  margin: 0;
  padding: 0;
  width: 100%;
  height: 100%;
  font-family: 'Montserrat', sans-serif;
  display: flex;
  justify-content: center;
  align-items: center;
  background-color: #f9f9f9;
}
#radarChart {
  width: 100%;
  height: 100%;
}
</style>
</head>
<body>
<div id="radarChart"></div>
<script>
// Data points
const categories = [
  "Concentration Risk", 
  "Payment History", 
  "Sector Diversity", 
  "Margin Quality", 
  "Deposit Coverage"
];
const values = [9, 8, 2, 8, 5]; // scale 0-10
const N = categories.length;
const maxValue = 10;
const levels = 5; // number of scale pentagons

// Calculate regular pentagon coordinates
function pentagonCoords(radius){
  const coords = [];
  for(let i=0;i<N;i++){
    const angle = Math.PI/2 - 2*Math.PI*i/N; // upright pentagon
    coords.push([radius * Math.cos(angle), radius * Math.sin(angle)]);
  }
  return coords;
}

// Correct for aspect ratio: Plotly should be square
const aspectScale = 1; // square scale

// Data overlay coordinates
const dataCoords = pentagonCoords(1).map((c,i)=>{
  const scale = values[i]/maxValue;
  return [c[0]*scale*aspectScale, c[1]*scale];
});
dataCoords.push(dataCoords[0]); // close polygon

// Labels outside vertices
const labelCoords = pentagonCoords(1.1).map(c=>[c[0]*aspectScale,c[1]]);

// Concentric pentagons for scale
const scaleTraces = [];
for(let l=1;l<=levels;l++){
  const r = l/levels;
  const coords = pentagonCoords(r).map(c=>[c[0]*aspectScale,c[1]]);
  coords.push(coords[0]);
  scaleTraces.push({
    x: coords.map(c=>c[0]),
    y: coords.map(c=>c[1]),
    type:'scatter',
    mode:'lines',
    line:{color:'#ddd',width:1},
    hoverinfo:'skip',
    showlegend:false
  });
}

// Data overlay trace
const dataTrace = {
  x: dataCoords.map(c=>c[0]),
  y: dataCoords.map(c=>c[1]),
  fill:'toself',
  fillcolor:'rgba(255,127,14,0.5)',
  line:{color:'#ff7f0e', width:2},
  type:'scatter',
  mode:'lines+markers',
  marker:{size:6,color:'#ff7f0e'},
  hoverinfo:'skip'
};

// Labels trace
const labelTrace = {
  x: labelCoords.map(c=>c[0]),
  y: labelCoords.map(c=>c[1]),
  text: categories,
  mode:'text',
  textfont:{size:10,color:'#333'},
  hoverinfo:'skip',
  type:'scatter'
};

// Layout with square aspect ratio
const layout = {
  xaxis: { visible:false, range:[-1.3,1.3], scaleanchor:'y' },
  yaxis: { visible:false, range:[-1.3,1.3] },
  margin: { t:30, b:30, l:50, r:50 },
  plot_bgcolor: '#ffffff',   // chart area background
  paper_bgcolor: '#ffffff',  // page background
  showlegend: false,
  autosize: true
};

// Plot
const config = { displayModeBar:false,responsive:true };
const chartDiv = document.getElementById('radarChart');

function resizeChart(){
  Plotly.Plots.resize(chartDiv);
}

Plotly.newPlot(chartDiv,[...scaleTraces,dataTrace,labelTrace],layout,config);
window.addEventListener('resize',resizeChart);
setInterval(resizeChart,100);
</script>
</body>
</html>
