<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Risk Radar Chart</title>

<style>
    body {
        background: white;
        font-family: Arial, sans-serif;
        margin: 0;
        padding: 0;
        display: flex;
        justify-content: center;
        align-items: center;
        height: 100vh;
    }
    canvas {
        background: white;
    }
</style>
</head>

<body>

<canvas id="radar" width="700" height="700"></canvas>

<script>
// -----------------------------
// INPUT DATA
// -----------------------------
const data = [
    { category: "Concentration Risk", value: 90 },
    { category: "Payment History", value: 80 },
    { category: "Deposit Coverage", value: 50 },
    { category: "Margin Quality", value: 80 },
    { category: "Sector Diversity", value: 20 }
];

const canvas = document.getElementById("radar");
const ctx = canvas.getContext("2d");

const W = canvas.width;
const H = canvas.height;

// -----------------------------
// CHART SETTINGS
// -----------------------------
const centerX = W / 2;
const centerY = H / 2 + 20;
const maxRadius = 260;

// Correct scale: 4 grid rings for 25/50/75/100
const rings = 4;
const angleStep = (Math.PI * 2) / data.length;

// -----------------------------
// DRAW GRID RINGS + LABELS
// -----------------------------
function drawGrid() {
    ctx.strokeStyle = "#cccccc";
    ctx.lineWidth = 1;
    ctx.font = "16px Arial";
    ctx.fillStyle = "#555";
    ctx.textAlign = "center";

    for (let i = 1; i <= rings; i++) {
        const radius = (maxRadius / rings) * i;
        ctx.beginPath();

        for (let j = 0; j < data.length; j++) {
            const angle = -Math.PI / 2 + j * angleStep;
            const x = centerX + radius * Math.cos(angle);
            const y = centerY + radius * Math.sin(angle);
            if (j === 0) ctx.moveTo(x, y);
            else ctx.lineTo(x, y);
        }

        ctx.closePath();
        ctx.stroke();

        // Correct labels: 25/50/75/100
        const label = (i * 25).toString();
        ctx.fillText(label, centerX, centerY - radius - 5);
    }
}

// -----------------------------
// DRAW AXES + CATEGORY LABELS
// -----------------------------
function drawAxes() {
    ctx.lineWidth = 2;
    ctx.strokeStyle = "#777";
    ctx.font = "18px Arial";
    ctx.fillStyle = "#000";

    for (let i = 0; i < data.length; i++) {
        const angle = -Math.PI / 2 + i * angleStep;

        const x = centerX + maxRadius * Math.cos(angle);
        const y = centerY + maxRadius * Math.sin(angle);

        // Axis
        ctx.beginPath();
        ctx.moveTo(centerX, centerY);
        ctx.lineTo(x, y);
        ctx.stroke();

        // Label position with margin
        const lx = centerX + (maxRadius + 35) * Math.cos(angle);
        const ly = centerY + (maxRadius + 35) * Math.sin(angle);

        ctx.textAlign = "center";
        ctx.fillText(data[i].category, lx, ly);
    }
}

// -----------------------------
// DRAW DATA SHAPE
// -----------------------------
function drawData() {
    ctx.strokeStyle = "#0077cc";
    ctx.fillStyle = "rgba(0, 120, 255, 0.35)";
    ctx.lineWidth = 3;

    ctx.beginPath();
    data.forEach((p, i) => {
        const angle = -Math.PI / 2 + i * angleStep;
        const radius = (p.value / 100) * maxRadius;

        const x = centerX + radius * Math.cos(angle);
        const y = centerY + radius * Math.sin(angle);

        if (i === 0) ctx.moveTo(x, y);
        else ctx.lineTo(x, y);
    });

    ctx.closePath();
    ctx.fill();
    ctx.stroke();
}

// -----------------------------
// RENDER
// -----------------------------
drawGrid();
drawAxes();
drawData();

</script>

</body>
</html>
